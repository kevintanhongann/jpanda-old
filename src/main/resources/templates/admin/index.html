<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.thymeleaf.org/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity"
      layout:decorator="admin/layout" ng-app="panda">
<body>
<div layout:fragment="content" class="ui page padded grid">
    <div class="sixteen wide column" ng-controller="NavCtrl">
        <div class="ui secondary pointing menu">
            <a class="item" href="#/" ng-class="{active:is('index')}">
                <i class="cloud icon"></i>
                <th:block th:text="#{index.menu.dashboard}">Dashboard</th:block>
            </a>

            <div class="ui dropdown item"
                 sec:authorize="hasRole('ROLE_CONTENT') || hasRole('ROLE_ADMIN')">
                <i class="database icon"></i>

                <th:block th:text="#{index.menu.content}">Content</th:block>
                <i class="dropdown icon"></i>

                <div class="menu">
                    <a class="item" href="#/content/pages"><i class="file text outline icon"></i>
                        <th:block th:text="#{index.menu.pages}">Pages</th:block>
                    </a>
                    <a class="item" href="#/content/announcement"
                       sec:authorize="hasRole('ROLE_MANAGER') || hasRole('ROLE_ADMIN')">
                        <i class="announcement icon"></i>
                        <th:block th:text="#{index.menu.announcement}">Announcement</th:block>
                    </a>
                </div>
            </div>
            <div class="ui dropdown item" sec:authorize="hasRole('ROLE_ADMIN')">
                <i class="dropdown icon"></i>
                <i class="settings icon"></i>
                <th:block th:text="#{index.menu.administration}">Administration</th:block>
                <div class="menu">
                    <a class="item active" href="#/admin/users"> <i class="user icon"></i>
                        <th:block th:text="#{index.menu.users}">Users</th:block>
                    </a>
                    <a class="item" href="#/admin/groups"> <i class="users icon"></i>
                        <th:block th:text="#{index.menu.groups}">Groups</th:block>
                    </a>
                    <a class="item" href="#/admin/redirects"> <i class="share icon"></i>
                        <th:block th:text="#{index.menu.redirects}">Redirects</th:block>
                    </a>
                </div>
            </div>
            <a class="item" ng-class="{active:is('analytics')}" href="#/analytics"
               sec:authorize="hasRole('ROLE_ANALYTICS') || hasRole('ROLE_ADMIN')">
                <i class="wifi icon"></i>
                <th:block th:text="#{index.menu.analytics}">Analytics</th:block>
            </a>

            <div class="right menu">
                <div class="item">
                    <div class="ui icon input">
                        <input placeholder="Search..." type="text"/>
                        <i class="search link icon"></i>
                    </div>
                </div>
                <div class="ui dropdown item">
                    <i class="dropdown icon"></i>
                    <i class="user icon"></i>
                    <span sec:authentication="name">user</span>

                    <div class="menu">
                        <a class="item" href="#/profile"><i class="user icon"></i>
                            <th:block th:text="#{index.menu.profile}">Profile</th:block>
                        </a>

                        <div class="divider"></div>
                        <a class="item logout"><i class="power icon"></i>
                            <th:block th:text="#{index.menu.logout}">Logout</th:block>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="sixteen wide column">
        <h2 class="ui header">
            <i class="blue cloud icon"/>

            <div class="content ng-cloak">Dashboard Nothing here {{'yet' + '!'}}

                <div sec:authentication="name" class="sub header">
                    The value of the "name" property of the authentication object should appear here.
                </div>
            </div>
        </h2>
        <div class="row" ng-view="">
        </div>
    </div>

    <form id="logout" action="/admin/logout" method="post" class="ui icon input form">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
    </form>
</div>

<th:block layout:fragment="body-bottom">
    <script type="text/javascript">
    $('.item.logout').on('click', function(){ $('#logout').submit(); });
    $('.dropdown').dropdown({ transition: 'slide down' });
    </script>
    <script th:src="@{/webjars/angularjs/1.3.13/angular.min.js}"/>
    <script th:src="@{/webjars/angularjs/1.3.13/angular-route.min.js}"/>
    <script th:src="@{/admin/js/application.js}"/>
</th:block>
</body>
</html>